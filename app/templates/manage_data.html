{% extends '_mybase.html' %}

{% block content %}
    {{ super() }}

    <legend>查看测试数据</legend>
    <div>
        {{ pagination.info }}
        {{ pagination.links }}
    </div>

    <div class="btn-group">
        <form style="display: inline" action="{{ url_for('blue_manage.vf_data') }}" method="get">
            <button type="submit" class="btn btn-primary ">刷新</button>
        </form>
        <form style="display: inline" action="{{ url_for('blue_manage.cmd_download_testdatasarchive') }}" method="post">
            <button type="submit" class="btn btn-primary" >下载报表</button>
        </form>
        <form style="display: inline" action="#" method="post">
            <button type="submit" class="btn btn-success" disabled>上传数据</button>
        </form>
        <form style="display: inline" action="{{ url_for('blue_manage.cmd_deletearchive') }}" method="post">
            <button type="submit" class="btn btn-danger">清除数据</button>
        </form>
    </div>

    <table class="table table-striped table-hover ">
        <thead>
        <tr>
            <th>#</th>
            <th>设备类型</th>
            <th>工厂</th>
            <th>固件版本</th>
            <th>RSSI_BLE</th>
            <th>RSSI_WIFI</th>
            <th>MAC_BLE</th>
            <th>MAC_WIFI</th>
            <th>信号强度检测</th>
            <th>组合指令检测</th>
            <th>广播扫描检测</th>
            <th>设备类型检测</th>
            <th>时间</th>
        </tr>
        </thead>
        <tbody>
        {% for result in results %}
            {% if not result.bool_qualified_signal or not result.bool_qualified_check or not result.bool_qualified_scan or not result.bool_qualified_deviceid %}
                <tr class="info">
            {% else %}
                <tr class="default">
            {% endif %}
        <td>{{ loop.index + pagination.skip }}</td>
        <td>{{ result.device.name }}</td>
        <td>{{ result.factory.name }}</td>
        <td>{{ result.fw_version }}</td>
        <td>{{ result.rssi_ble1 }}</td>
        <td>{{ result.rssi_wifi1 }}</td>
        <td>{{ result.mac_ble }}</td>
        <td>{{ result.mac_wifi }}</td>
        <td>{{ result.bool_qualified_signal|parse_is_qualified }}</td>
        <td>{{ result.bool_qualified_check|parse_is_qualified }}({{result.status_cmd_check2}})</td>
        <td>{{ result.bool_qualified_scan|parse_is_qualified }}</td>
        <td>{{ result.bool_qualified_deviceid|parse_is_qualified }}</td>
        <td>{{ result.datetime }}</td>
        </tr>
        {% else %}
        {% endfor %}
        </tbody>
    </table>
    <div>
        {{ pagination.links }}
    </div>
    <div>
    <br>
    <br>
{% endblock %}

